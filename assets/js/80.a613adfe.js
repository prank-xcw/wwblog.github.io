(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{514:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"redis安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis安装"}},[s._v("#")]),s._v(" redis安装")]),s._v(" "),t("p",[s._v("linux：https://redis.io/download")]),s._v(" "),t("p",[s._v("windows: https://github.com/MicrosoftArchive/redis/releases")]),s._v(" "),t("p",[s._v("远程工具：https://github.com/qishibo/AnotherRedisDesktopManager/releases")]),s._v(" "),t("p",[s._v("windows版本直接下载压缩包，解压即可；")]),s._v(" "),t("h4",{attrs:{id:"linux安装redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux安装redis"}},[s._v("#")]),s._v(" Linux安装redis：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("通过远程管理工具，将压缩包拷贝到Linux服务器中，执行解压操作 "),t("code",[s._v("tar -zxf redis-4.0.9.tar.gz")])])]),s._v(" "),t("li",[t("p",[s._v("进入解压文件目录使用"),t("code",[s._v("make")]),s._v("对解压的Redis文件进行编译")]),s._v(" "),t("p",[s._v("注：如果在编译过程中出现问题，有可能是安装包下载的有误，这里可以尝试的用别人下载的安装包或者直接用")]),s._v(" "),t("p",[t("code",[s._v("wget http://download.redis.io/releases/redis-4.0.9.tar.gz")])]),s._v(" "),t("p",[s._v("如果发现上述读不能解决问题，请参照该链接：https://www.cnblogs.com/liu2-/p/6914159.html")])]),s._v(" "),t("li",[t("p",[s._v(".编译成功后，进入src文件夹，执行make install进行Redis安装")])]),s._v(" "),t("li",[t("p",[s._v("编辑"),t("strong",[s._v("redis.conf")]),s._v("设置"),t("strong",[s._v("后台启动redis")]),s._v("：daemonize属性改为 yes(表示需要在后台启动)")])]),s._v(" "),t("li",[t("p",[s._v("启动redis服务，并指定启动服务配置文件，"),t("strong",[s._v("进入redis默认安装目录/usr/local/bin")])]),s._v(" "),t("p",[t("strong",[s._v("启动服务")]),s._v("： ./redis-server   redis.conf")]),s._v(" "),t("p",[t("strong",[s._v("启动客户端")]),s._v("：./redis-cli")]),s._v(" "),t("p",[s._v("​\t\t\t\t\tconfig get requirepass\t\t\t\t\t\t"),t("strong",[s._v("查看密码")])]),s._v(" "),t("p",[s._v('​\t\t\t\t\tconfig set requirepass "admin"  \t  '),t("strong",[s._v("设置密码")])]),s._v(" "),t("p",[s._v("​\t\t\t\t\tauth admin\t  \t\t\t\t\t\t\t\t\t "),t("strong",[s._v("密码登录")])]),s._v(" "),t("p",[s._v("**密码登录：**redis-cli -h 127.0.0.1 -p 6379 -a admin")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("redis-cli #客户端\nredis-server #服务器启动\nredis-sentin #redis集群使用\nrdb文件，快照\naof记录每一步\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"redis的持久化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis的持久化"}},[s._v("#")]),s._v(" redis的持久化")]),s._v(" "),t("blockquote",[t("h3",{attrs:{id:"rdb快照"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rdb快照"}},[s._v("#")]),s._v(" RDB快照")])]),s._v(" "),t("p",[s._v("如何触发RDB快照")]),s._v(" "),t("p",[s._v("测试方法：在指定时间内达到操作次数，就会产生备份文件dump.rdb，此文件会产生在启动redis时的目录中。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("第一步修改redis.conf配置文件中的参数：[root@localhost ~]# vim  安装目录下的redis.conf文件，设置两分钟内10次修改就会触发RDB快照")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("save 900 1\nsave 120 10\nsava 60 10000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("启动服务：服务目录为 /usr/local/bin，Redis服务启动时是在 /bin  目录下启动的，那么产生备份文件dump.rdb就在此目录下，2分钟内添加11个值，查看bin目录下已经产生dump.rdb文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("redis-server  /app/redis-3.0.4/redis.conf\t#启动服务\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("第四步：将redis中的数据清空，并停掉redis服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("flush db\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("第五步：将dump.rdb备份文件复制回bin目录中，当启动redis服务时会自动读取文件还原数据")])]),s._v(" "),t("li",[t("p",[s._v("第六步：启动服务，查看数据是否还原")])])]),s._v(" "),t("p",[s._v("优势")]),s._v(" "),t("p",[s._v("适合大规模的数据恢复")]),s._v(" "),t("p",[s._v("对数据完整性和一致性要求不高")]),s._v(" "),t("p",[s._v("劣势")]),s._v(" "),t("p",[s._v("在一定间隔时间做一次备份，所以如果redis意外down掉的话，就会丢失最后一次快照后的所有修改")]),s._v(" "),t("p",[s._v("Fork的时候，内存中的数据被克隆了一份，大致2倍的膨胀性需要考虑")]),s._v(" "),t("h2",{attrs:{id:"redis发布与订阅"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis发布与订阅"}},[s._v("#")]),s._v(" redis发布与订阅")]),s._v(" "),t("blockquote",[t("h3",{attrs:{id:"发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布"}},[s._v("#")]),s._v(" 发布")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("publish c1 mess\t\t\t\t\t\t\t#publish 频道 message\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("h3",{attrs:{id:"订阅"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#订阅"}},[s._v("#")]),s._v(" 订阅")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("subscribe a1 b1 c1\t\t\t\t\t\t#subscribe 频道"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 频道"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 频道"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"redis配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis配置"}},[s._v("#")]),s._v(" redis配置")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis数据库索引（默认为0）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.database")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis服务器地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis服务器连接端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis服务器连接密码（默认为空）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池最大连接数（使用负值表示没有限制）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.jedis.pool.max-active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("20")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池最大阻塞等待时间（使用负值表示没有限制）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.jedis.pool.max-wait")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("-1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池中的最大空闲连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.jedis.pool.max-idle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池中的最小空闲连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.jedis.pool.min-idle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接超时时间（毫秒）")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.redis.timeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("1000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);