(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{507:function(s,e,a){"use strict";a.r(e);var r=a(2),n=Object(r.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"安装redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装redis"}},[s._v("#")]),s._v(" 安装redis")]),s._v(" "),e("h3",{attrs:{id:"_1-拉取镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-拉取镜像"}},[s._v("#")]),s._v(" 1.拉取镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-下载对应版本的配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-下载对应版本的配置"}},[s._v("#")]),s._v(" 2.下载对应版本的配置")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{pre:!0,attrs:{class:"token header"}},[e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("https")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token header-value"}},[s._v("//redis.io/docs/management/config")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-创建映射配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建映射配置文件"}},[s._v("#")]),s._v(" 3.创建映射配置文件")]),s._v(" "),e("p",[s._v("配置文件上传至"),e("code",[s._v("/home/redis/conf")]),s._v(" 并在"),e("code",[s._v("/home/redis/log")]),s._v("目录中创建空文件"),e("code",[s._v("redis.log")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /home/redis/conf /home/redis/data /home/redis/log  \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建挂载日志文件，并授权")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/redis/log/redis.log\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /home/redis/log/redis.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("配置文件内容为")]),s._v(" "),e("div",{staticClass:"language-conf line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#默认127.0.0.1改为0.0.0.0，解除本地连接限制\nbind 0.0.0.0\n\n#开启保护模式，限制为本地访问,默认yes\nprotected-mode no\n\n#端口设置6379\nport 6379\n\n#给redis设置密码\nrequirepass 123456\n\n# 是否开启AOF持久化\nappendonly yes\n\n# 对访问客户端的一种心跳检测，每个n秒检测一次。单位为秒，如果设置为0，则不会进行Keepalive检测\ntcp-keepalive 300\n\n#是否为守护进程，设置为no，因为该配置和docker run中-d参数冲突，会导致容器一直启动失败\ndaemonize no\n\n# 指定日志文件名\nlogfile "/var/log/reids.log"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("h3",{attrs:{id:"_4-运行容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-运行容器"}},[s._v("#")]),s._v(" 4.运行容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-itd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" redis "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/redis/conf/redis.conf:/usr/local/etc/redis/redis.conf "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/redis/data/:/data "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/redis/log/redis.log:/var/log/redis.log  redis:7 redis-server /usr/local/etc/redis/redis.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("说明：")]),s._v(" "),e("p",[e("code",[s._v("--name redis")]),s._v(" 指定容器名称")]),s._v(" "),e("p",[e("code",[s._v("-v /home/redis/conf/redis.conf:/usr/local/etc/redis/redis.conf")]),s._v(" 将宿主机redis.conf挂载到容器中")]),s._v(" "),e("p",[e("code",[s._v("-v /home/redis/data/:/data")]),s._v(" 将redis数据存储路径挂载到宿主机目录中")]),s._v(" "),e("p",[e("code",[s._v("-v /home/redis/log/redis.log:/var/log/redis.log")]),s._v(" 挂载redis日志")]),s._v(" "),e("p",[e("code",[s._v("redis-server /usr/local/etc/redis/redis.conf")]),s._v(" 启动redis服务并指定配置文件")])]),s._v(" "),e("h2",{attrs:{id:"redis集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis集群"}},[s._v("#")]),s._v(" redis集群")])])}),[],!1,null,null,null);e.default=n.exports}}]);